# 09-å¸¸è§é—®é¢˜

æœ¬æ–‡æ¡£æ”¶é›†äº†ä½¿ç”¨ Barter-rs æ—¶é‡åˆ°çš„å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚å¦‚æœä½ é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å…ˆåœ¨è¿™é‡ŒæŸ¥æ‰¾ç­”æ¡ˆã€‚

## ğŸ“‹ ç›®å½•

-   [å®‰è£…å’Œé…ç½®é—®é¢˜](#å®‰è£…å’Œé…ç½®é—®é¢˜)
-   [ä»£ç ç¼–è¯‘é—®é¢˜](#ä»£ç ç¼–è¯‘é—®é¢˜)
-   [è¿è¡Œæ—¶é”™è¯¯](#è¿è¡Œæ—¶é”™è¯¯)
-   [ç­–ç•¥ç›¸å…³é—®é¢˜](#ç­–ç•¥ç›¸å…³é—®é¢˜)
-   [æ€§èƒ½é—®é¢˜](#æ€§èƒ½é—®é¢˜)
-   [å…¶ä»–é—®é¢˜](#å…¶ä»–é—®é¢˜)

## ğŸ”§ å®‰è£…å’Œé…ç½®é—®é¢˜

### Q1: å¦‚ä½•å®‰è£… Rust å’Œ Cargoï¼Ÿ

**A**: è®¿é—® [rustup.rs](https://rustup.rs/) å®‰è£… Rustã€‚å®‰è£…å®Œæˆåï¼Œ`cargo` å‘½ä»¤ä¼šè‡ªåŠ¨å¯ç”¨ã€‚

éªŒè¯å®‰è£…ï¼š

```bash
rustc --version
cargo --version
```

### Q2: å¦‚ä½•å…‹éš†å’Œæ„å»ºé¡¹ç›®ï¼Ÿ

**A**:

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/barter-rs/barter-rs.git
cd barter-rs

# æ„å»ºé¡¹ç›®
cargo build

# è¿è¡Œç¤ºä¾‹
cargo run --package barter --example engine_sync_with_live_market_data_and_mock_execution_and_audit
```

### Q3: ç¼–è¯‘æ—¶å‡ºç°ä¾èµ–é”™è¯¯ï¼Ÿ

**A**: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Rust ç‰ˆæœ¬ï¼ˆ1.70+ï¼‰ï¼š

```bash
# æ›´æ–° Rust
rustup update

# æ£€æŸ¥ç‰ˆæœ¬
rustc --version
```

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå°è¯•ï¼š

```bash
# æ¸…ç†æ„å»ºç¼“å­˜
cargo clean

# é‡æ–°æ„å»º
cargo build
```

## ğŸ’» ä»£ç ç¼–è¯‘é—®é¢˜

### Q4: `cannot find crate 'barter'`

**A**: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œå‘½ä»¤ï¼Œæˆ–è€…ä½¿ç”¨ `--package` å‚æ•°ï¼š

```bash
# æ­£ç¡®æ–¹å¼
cargo run --package barter --example example_name

# æˆ–è€…åœ¨ barter ç›®å½•ä¸‹
cd barter
cargo run --example example_name
```

### Q5: ç±»å‹ä¸åŒ¹é…é”™è¯¯

**A**: æ£€æŸ¥ç±»å‹å‚æ•°æ˜¯å¦æ­£ç¡®ï¼š

```rust
// ç¡®ä¿ Strategy å’Œ RiskManager çš„ State ç±»å‹åŒ¹é…
impl AlgoStrategy for MyStrategy {
    type State = EngineState<DefaultGlobalData, DefaultInstrumentMarketData>;
    // ...
}

impl RiskManager for MyRiskManager {
    type State = EngineState<DefaultGlobalData, DefaultInstrumentMarketData>;
    // ...
}
```

### Q6: ç”Ÿå‘½å‘¨æœŸé”™è¯¯

**A**: æ£€æŸ¥å¼•ç”¨å’Œæ‰€æœ‰æƒçš„ä½¿ç”¨ï¼š

```rust
// å¦‚æœé‡åˆ°ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼Œè€ƒè™‘ä½¿ç”¨ Arc æˆ–å…‹éš†
use std::sync::Arc;

let state = Arc::new(engine_state);
```

## ğŸš€ è¿è¡Œæ—¶é”™è¯¯

### Q7: é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°

**A**: ç¡®ä¿é…ç½®æ–‡ä»¶è·¯å¾„æ­£ç¡®ï¼š

```rust
// ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„
const CONFIG_PATH: &str = "barter/examples/config/system_config.json";

// æˆ–è€…ä½¿ç”¨ç»å¯¹è·¯å¾„
let config_path = std::path::Path::new("/absolute/path/to/config.json");
```

### Q8: æ— æ³•è¿æ¥åˆ°äº¤æ˜“æ‰€

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1.  **ç½‘ç»œè¿æ¥**ï¼šç¡®ä¿ç½‘ç»œæ­£å¸¸
2.  **API å¯†é’¥**ï¼šéªŒè¯ API å¯†é’¥æ˜¯å¦æ­£ç¡®
3.  **é˜²ç«å¢™**ï¼šæ£€æŸ¥é˜²ç«å¢™è®¾ç½®
4.  **äº¤æ˜“æ‰€çŠ¶æ€**ï¼šç¡®è®¤äº¤æ˜“æ‰€æœåŠ¡æ­£å¸¸

### Q9: è®¢å•æ‰§è¡Œå¤±è´¥

**A**: æ£€æŸ¥ï¼š

1.  **èµ„é‡‘æ˜¯å¦å……è¶³**ï¼šæ£€æŸ¥è´¦æˆ·ä½™é¢
2.  **è®¢å•å‚æ•°**ï¼šéªŒè¯ä»·æ ¼ã€æ•°é‡æ˜¯å¦æ­£ç¡®
3.  **äº¤æ˜“æ‰€é™åˆ¶**ï¼šæ£€æŸ¥æœ€å°è®¢å•é‡ã€ä»·æ ¼ç²¾åº¦ç­‰
4.  **é£é™©æ£€æŸ¥**ï¼šæŸ¥çœ‹ RiskManager æ˜¯å¦æ‹’ç»äº†è®¢å•

### Q10: ç³»ç»Ÿå¯åŠ¨åæ²¡æœ‰ç”Ÿæˆè®¢å•

**A**: æ£€æŸ¥ï¼š

1.  **äº¤æ˜“çŠ¶æ€**ï¼šç¡®ä¿ `TradingState::Enabled`
2.  **å¸‚åœºæ•°æ®**ï¼šç¡®è®¤å¸‚åœºæ•°æ®æµæ­£å¸¸
3.  **ç­–ç•¥é€»è¾‘**ï¼šéªŒè¯ç­–ç•¥çš„å…¥åœºæ¡ä»¶
4.  **æ—¥å¿—è¾“å‡º**ï¼šæŸ¥çœ‹æ—¥å¿—äº†è§£è¯¦ç»†ä¿¡æ¯

## ğŸ“Š ç­–ç•¥ç›¸å…³é—®é¢˜

### Q11: å¦‚ä½•è·å–å†å²ä»·æ ¼æ•°æ®ï¼Ÿ

**A**: éœ€è¦ä» `instrument_state.data` è·å–ã€‚å…·ä½“å®ç°å–å†³äºä½ ä½¿ç”¨çš„ `InstrumentData` ç±»å‹ï¼š

```rust
// å¦‚æœä½¿ç”¨ DefaultInstrumentMarketData
// éœ€è¦æ‰©å±•å®ƒä»¥å­˜å‚¨å†å²ä»·æ ¼
// æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰çš„ InstrumentData ç±»å‹
```

### Q12: å¦‚ä½•å®ç°æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ï¼Ÿ

**A**: å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ `ta`ï¼‰æˆ–è‡ªå·±å®ç°ï¼š

```rust
// ä½¿ç”¨ ta åº“è®¡ç®—ç§»åŠ¨å¹³å‡çº¿
use ta::indicators::SimpleMovingAverage;

let mut sma = SimpleMovingAverage::new(20).unwrap();
sma.update(price);
let ma_value = sma.value();
```

### Q13: ç­–ç•¥ä¸ç”Ÿæˆè®¢å•æ€ä¹ˆåŠï¼Ÿ

**A**: è°ƒè¯•æ­¥éª¤ï¼š

1.  æ·»åŠ æ—¥å¿—è¾“å‡º
2.  æ£€æŸ¥å…¥åœºæ¡ä»¶é€»è¾‘
3.  éªŒè¯å¸‚åœºæ•°æ®æ˜¯å¦å¯ç”¨
4.  ç¡®è®¤äº¤æ˜“çŠ¶æ€ä¸º Enabled

```rust
use tracing::{debug, info};

fn generate_algo_orders(&self, state: &Self::State) -> ... {
    info!("ç­–ç•¥å¼€å§‹ç”Ÿæˆè®¢å•");

    for (instrument_index, instrument_state) in state.instruments.iter() {
        debug!(?instrument_index, "å¤„ç†äº¤æ˜“å¯¹");

        // æ£€æŸ¥å¸‚åœºæ•°æ®
        debug!(?instrument_state.data, "å¸‚åœºæ•°æ®");

        // æ£€æŸ¥å…¥åœºæ¡ä»¶
        if should_buy(instrument_state) {
            info!("ç”Ÿæˆä¹°å…¥è®¢å•");
            // ...
        }
    }
}
```

## âš¡ æ€§èƒ½é—®é¢˜

### Q14: ç³»ç»Ÿè¿è¡Œç¼“æ…¢

**A**: ä¼˜åŒ–å»ºè®®ï¼š

1.  **ä½¿ç”¨å¼‚æ­¥æ¨¡å¼**ï¼š`EngineFeedMode::Stream`
2.  **å‡å°‘æ—¥å¿—è¾“å‡º**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒé™ä½æ—¥å¿—çº§åˆ«
3.  **ä¼˜åŒ–ç­–ç•¥é€»è¾‘**ï¼šå‡å°‘ä¸å¿…è¦çš„è®¡ç®—
4.  **ä½¿ç”¨ç¼“å­˜**ï¼šç¼“å­˜è®¡ç®—ç»“æœ

### Q15: å†…å­˜ä½¿ç”¨è¿‡é«˜

**A**: æ£€æŸ¥ï¼š

1.  **æ•°æ®ç§¯ç´¯**ï¼šå®šæœŸæ¸…ç†å†å²æ•°æ®
2.  **å¾ªç¯å¼•ç”¨**ï¼šé¿å…åˆ›å»ºå¾ªç¯å¼•ç”¨
3.  **å¤§å¯¹è±¡**ï¼šè€ƒè™‘ä½¿ç”¨å¼•ç”¨æˆ–åˆ‡ç‰‡

## ğŸ” å…¶ä»–é—®é¢˜

### Q16: å¦‚ä½•è·å–å¸®åŠ©ï¼Ÿ

**A**: å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å¸®åŠ©ï¼š

1.  **Discord ç¤¾åŒº**ï¼š[åŠ å…¥è®¨è®º](https://discord.gg/wE7RqhnQMV)
2.  **GitHub Issues**ï¼šæäº¤é—®é¢˜æŠ¥å‘Š
3.  **API æ–‡æ¡£**ï¼š[æŸ¥çœ‹æ–‡æ¡£](https://docs.rs/barter/latest/barter/)
4.  **ç¤ºä¾‹ä»£ç **ï¼šæŸ¥çœ‹ `examples/` ç›®å½•

### Q17: å¦‚ä½•è´¡çŒ®ä»£ç ï¼Ÿ

**A**: æ¬¢è¿è´¡çŒ®ï¼è¯·ï¼š

1.  Fork é¡¹ç›®
2.  åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3.  æäº¤ Pull Request
4.  åœ¨ Discord è®¨è®ºä½ çš„æƒ³æ³•

### Q18: é¡¹ç›®æ”¯æŒå“ªäº›äº¤æ˜“æ‰€ï¼Ÿ

**A**: æŸ¥çœ‹ [Barter-Data](https://docs.rs/barter-data/) å’Œ [Barter-Execution](https://docs.rs/barter-execution/) æ–‡æ¡£äº†è§£æ”¯æŒçš„äº¤æ˜“æ‰€åˆ—è¡¨ã€‚

### Q19: å¦‚ä½•æŠ¥å‘Š Bugï¼Ÿ

**A**: åœ¨ GitHub æäº¤ Issueï¼ŒåŒ…å«ï¼š

-   é—®é¢˜æè¿°
-   å¤ç°æ­¥éª¤
-   é”™è¯¯ä¿¡æ¯
-   ç¯å¢ƒä¿¡æ¯ï¼ˆRust ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰

### Q20: æ–‡æ¡£æœ‰é”™è¯¯æ€ä¹ˆåŠï¼Ÿ

**A**: æ¬¢è¿æäº¤ Pull Request ä¿®æ­£æ–‡æ¡£ï¼Œæˆ–åœ¨ GitHub Issues ä¸­æŠ¥å‘Šã€‚

## ğŸ“š ç›¸å…³èµ„æº

-   [é¡¹ç›® README](../README.md)
-   [API æ–‡æ¡£](https://docs.rs/barter/latest/barter/)
-   [Discord ç¤¾åŒº](https://discord.gg/wE7RqhnQMV)
-   [GitHub Issues](https://github.com/barter-rs/barter-rs/issues)

---

**å¦‚æœè¿™é‡Œæ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆï¼Œæ¬¢è¿åœ¨ Discord ç¤¾åŒºæé—®ï¼** ğŸ’¬
